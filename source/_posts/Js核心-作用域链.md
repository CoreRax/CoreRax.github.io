title: JavaScript作用域链
---

JavaScript是基于词法作用域的语言，也就是通过阅读包含变量定义在内的源码就能知道变量的作用域。全局变量在程序中始终有定义，局部变量在声明它的函数体内以及所嵌套的函数内都有定义。

全局变量是全局对象的一个属性。虽然没有规定，但是我们可以同样的将局部变量看作是自定义实现的对象的属性。这样每一段JavaScript代码，不论是全局代码或者是函数，都有一个与之相关联的作用域链。这个作用域链是一个对象列表或者链表，这组对象定义了这段代码作用域中的变量。当JavaScript做变量解析的时候，也就是查找某一个名为x的变量的时候，会从作用域链中的第一个对象开始查找，如果这个对象有一个名为x的属性，就会直接使用这个属性的值。如果第一个对象没有名为x的属性，JavaScript会继续查找作用域链上的下一个对象。以此类推。如果作用域链上没有任何一个对象包含属性x，那么这段代码的作用域链上不存在x，并最终抛出一个引用错误（ReferenceError）异常。  

在JavaScript的最外层代码中，作用域链由一个全局对象组成。在不包含嵌套的函数体内，作用域上有两个对象，一个是定义函数参数和局部变量的对象，另一个是全局对象。

作用域链的创建规则，当定义一个函数时，它实际上保存了一个作用域链，当我们调用这个函数时，它创建一个新的对象来存储它的局部变量，并且把这个对象加到保存的那个作用域链上，同时创建一个新的更长的表示函数调用作用域的“链”。