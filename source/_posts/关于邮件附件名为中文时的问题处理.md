title: 邮件附件名为中文时收到的邮件附件为tcmime.XXXX.XXXX.XXXX.bin
---

##### 问题描述
在使用JavaMail发送带附件邮件时

##### 解决方案
Class MimeUtility.encodeWord
MimeUtility提供了一系列的MIME头编解码方法。
一个遵循RFC 822的邮件头**必须**包含只含只由US-ASCII 字符集构成的字串，如果不是US-ASCII 的字符必需被编码来只含有US-ASCII 字符。这一过程涉及使用Base64或者QP来编码。

在Java中，字符串包含unicode字符，ASCII是Unicode的子集(0-127),一个只包含ASCII编码的字符串已经是“邮件安全”的了。如果字符串包含非ASCII编码的字符，那就必须要被编码过。

记住，如果要安全地得到邮件的字符串的字节码，需要用一下方法：
`byte[] bytes = string.getBytes("iso-8859-1");`

MimeUtility.encodeWord方法说明：
把一个RFC 822规范的字串编码为"邮件安全"的per RFC2047规范要求的字串。
给定的参数以一个含有非ASCII字符的字串，如果含有ASCII字符，该字符就会保持原样，如果有非ASCII字符，首先会使用平台默认的编码格式，然后使用BASE64或者QP进行传输编码。返回的字符串就是只包含ASCII字符的字串。

使用方法，在添加附件的时候是使用的`MimeMessageHelper.addAttachment(filename,file)`这时在使用filename的之前先使用`MimeUtility.encodeWord(fileName, MimeUtility.getDefaultJavaCharset(),"B")`编码。

	
